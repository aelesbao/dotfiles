# Keys reference
#
# hyper | cmd + alt + ctrl + shift
# 0x18  | =
# 0x29  | ;
# 0x21  | [
# 0x1E  | ]

# -- Displays --

# change focus between external displays (left and right)
cmd + alt + ctrl - 0x21 : yabai -m display --focus prev
cmd + alt + ctrl - 0x1E : yabai -m display --focus next

# -- Spaces --

# fast focus space
cmd + ctrl - 0x29 : yabai -m space --focus recent
#cmd + ctrl - 0x21 : yabai -m space --focus prev
#cmd + ctrl - 0x1E : yabai -m space --focus next

# workaround until yabai's bug on macOS 14.2 is fixed
cmd + ctrl - 0x21 : skhd -k "cmd + ctrl - left"
cmd + ctrl - 0x1E : skhd -k "cmd + ctrl - right"

# move spaces
cmd + ctrl + shift - 0x21 : yabai -m space --move prev
cmd + ctrl + shift - 0x1E : yabai -m space --move next

# rotate layout clockwise
cmd + ctrl + shift - r : yabai -m space --rotate 270

# flip along y-axis
cmd + ctrl + shift - y : yabai -m space --mirror y-axis

# flip along x-axis
cmd + ctrl + shift - x : yabai -m space --mirror x-axis

# change space layout
cmd + ctrl + shift - b : yabai -m space --layout bsp
cmd + ctrl + shift - s : yabai -m space --layout stack
cmd + ctrl + shift - f : yabai -m space --layout float

# balance size of windows
cmd + ctrl + shift - 0x18 : yabai -m space --balance

# -- Windows --

# change window focus within space
ctrl + alt - j : yabai -m window --focus south
ctrl + alt - k : yabai -m window --focus north
ctrl + alt - h : yabai -m window --focus west
ctrl + alt - l : yabai -m window --focus east

# swap windows
ctrl + alt + shift - j : yabai -m window --swap south
ctrl + alt + shift - k : yabai -m window --swap north
ctrl + alt + shift - h : yabai -m window --swap west
ctrl + alt + shift - l : yabai -m window --swap east

# move window and split
cmd + alt + shift - j : yabai -m window --warp south
cmd + alt + shift - k : yabai -m window --warp north
cmd + alt + shift - h : yabai -m window --warp west
cmd + alt + shift - l : yabai -m window --warp east

# send window to display and follow focus
hyper - 0x21 : yabai -m window --display prev && \
               yabai -m display --focus prev
hyper - 0x1E : yabai -m window --display next && \
               yabai -m display --focus next

# send window to space and follow focus
#cmd + alt + shift - 0x21 : yabai -m window --space prev && \
#                           yabai -m space --focus prev
#cmd + alt + shift - 0x1E : yabai -m window --space next && \
#                           yabai -m space --focus next

# workaround until yabai's bug on macOS 14.2 is fixed
cmd + alt + shift - 0x21 : yabai -m window --space prev && \
                           skhd -k "cmd + ctrl - left"
cmd + alt + shift - 0x1E : yabai -m window --space next && \
                           skhd -k "cmd + ctrl - right"

# toggle window split type
cmd + alt + shift - e : yabai -m window --toggle split

# change split ration for the current window
# resizes the current window to 1/2
cmd + alt + shift - 2 : yabai -m window --ratio abs:0.5
# resizes the current window to 2/3
cmd + alt + shift - 3 : yabai -m window --ratio abs:0.33
# resizes the current window to 2/3
cmd + alt + shift - 4 : yabai -m window --ratio abs:0.25

# float / unfloat window and center on screen
cmd + alt + shift - t : yabai -m window --toggle float --grid 8:8:1:1:6:6

# toggle window zoom
cmd + alt + shift - z : yabai -m window --toggle zoom-fullscreen
cmd + alt + shift - f : yabai -m window --toggle native-fullscreen

# make floating window fill entire or half screen
cmd + alt + shift - up    : yabai -m window --grid 1:1:0:0:1:1
cmd + alt + shift - down  : yabai -m window --grid 8:8:1:1:6:6
cmd + alt + shift - left  : yabai -m window --grid 1:2:0:0:1:1
cmd + alt + shift - right : yabai -m window --grid 1:2:1:1:1:1

# create desktop, move window and follow focus - uses jq for parsing json (brew install jq)
hyper - n : yabai -m space --create && \
            index="$(yabai -m query --spaces --display | jq 'map(select(.is-native-fullscreen == false))[-1].index')" && \
            yabai -m window --space "${index}" && \
            yabai -m space --focus "${index}"

# -- Starting/Stopping/Restarting Yabai --

hyper - s : yabai --start-service
hyper - r : yabai --restart-service
hyper - q : yabai --stop-service

# move floating window
# shift + ctrl - a : yabai -m window --move rel:-20:0
# shift + ctrl - s : yabai -m window --move rel:0:20

# set insertion point in focused container
# ctrl + alt - h : yabai -m window --insert west
